from google.adk.agents.llm_agent import Agent
import json

CATEGORY_KEYWORDS = {
    "입출금관리": [
        "자금 이체",
        "입출금 관리",
        "수표 처리",
        "착오송금",
        "오류 정정",
        "이체수수료",
        "금융사고 예방",
        "고객 확인",
        "일일 자금 마감"
    ],
    "비대면제휴업무": [
        "제휴 앱 플랫폼",
        "비대면 계좌개설",
        "자산관리 서비스",
        "투자 상품",
        "포트폴리오 자문",
        "계좌 운영 및 관리",
        "이체 및 금융사고 대응",
        "수수료",
        "주문 위임"
    ],
    "기타매매": [
        "자사주 매매",
        "국내주식 소수점거래",
        "K-OTCBB",
        "장외거래",
        "크라우드펀딩 주식",
        "프로그램 매매",
        "정기 투자",
        "착오매매 구제"
    ],
    "창구관리및책임자거래업무": [
        "고객 비밀번호",
        "보안 관리",
        "마감 업무",
        "전자 결재",
        "업무 위임",
        "책임자 승인",
        "권한 관리",
        "문서 관리",
        "전결 기준",
        "창구 업무",
        "계좌 관리",
        "시재 관리"
    ],
    "ISA": [
        "ISA 계좌",
        "계좌 이전",
        "중도 인출",
        "운용 지시",
        "연금 계좌 전환",
        "자동 매매 서비스",
        "세제 혜택",
        "납입 한도",
        "가입자 검증",
        "해지 및 만기연장"
    ]
}

keyword_router = Agent(
    model="gemini-2.5-flash",
    name="keyword_router",
    description="키워드 기반 중분류 라우팅 에이전트",
    instruction=f"""
당신의 임무는 사용자의 질문을 보고,
중분류별 대표 키워드를 참고하여
가장 관련 있는 중분류 제목 하나만 선택해 JSON으로 출력하는 것입니다.

출력 형식:
{{
  "category": "선택된 중분류 제목"
}}

중분류별 대표 키워드 목록:
{json.dumps(CATEGORY_KEYWORDS, ensure_ascii=False)}
""",
    output_key="category_json",
)

__all__ = ["keyword_router"]
